# wisdomPortal系统介绍

该系统由IBM团队开发与维护，使用Golang语言开发后端，Vue开发前端。
该系统致力于解决运维中的业务关键指标集合监控运维，业务中间表状态数据条目与自动发现问题，解决问题等。
使用Golang语言的Gin框架开发，项目刚刚起步，后面会逐步完善功能，最终达到我们想要的智慧系统。

# 系统权限控制
本项目采用casbin用于权限管控，PERM模型理论，但依旧使用的是RBAC的权限控制模型。有兴趣的小伙伴可以更改模型采用面向未来的ABAC权限控制模型。
系统权限使用权限模板抽象化了接口和请求动作，让用户在前端选择上有了很大的灵活性和更好的体验。
多个接口和请求动作可以合并成一个权限模板，一个用户或用户组只可以对应一个权限模板。但是一个用户可以属于多个组，那么对应的也就可以有多个组的权限。
用户权限的组成：用户权限 = 用户权限 + 用户组权限

# 多因子认证
由于系统内部维护大多数的核心业务集合与核心数据校验，所以在登录上加入了Google的双因子认证，使用TOTP的方式进行双因子认证，采用SHA1的加密算法，30S刷新一次。
想体验的小伙伴可以直接在AppStore里面下载谷歌的验证器或者RedHat的FreeOTP验证器。

# JWT登录
在我个人的想法里，JWT不需要存储在任何地方，因为它本身就是无状态的。如果非要存储，那为什么不直接使用Session + Cookie呢？
所以，我们的JWT没有刷新，默认12个小时就过期了。
JWT不需要在后端进行注销，所以由前端完成注销功能，后面可能会考虑使用JWT黑名单。

# 接口文档生成
```bash
/Users/heyang/GoCode/src/wisdom-portal
swag init
```

项目功能：
- [ ] 用户功能
    - [X] 用户登录 
    - [X] 用户注册 
    - [ ] ~~用户注销~~
    - [X] 添加用户
    - [ ] 删除用户
    - [ ] 修改用户
    - [ ] 用户列表
    - [X] 获取当前用户信息
    - [ ] 获取指定用户信息
- [ ] 用户组功能
    - [X] 添加用户组
    - [ ] 删除用户组
    - [ ] 修改用户组
    - [ ] 用户组列表
- [ ] 权限功能
    - [X] 添加权限模板
    - [ ] 修改权限模板
    - [ ] 删除权限模板
    - [ ] 权限模板列表
    - [X] 添加用户权限模板
    - [ ] 修改用户权限模板
    - [X] 添加用户组权限模板
    - [ ] 修改用户组权限模板
- [X] JWT登录功能
    - [X] JWT生成
    - [X] JWT验证
    - [ ] ~~JWT删除~~
- [X] 双因子认证功能
    - [X] 创建双因子秘钥
    - [X] 校验双因子验证码
    - [X] 双因子认证二维码生成
    - [X] 双因子认证二维码查看
- [X] 接口文档
    - [X] 多因子接口文档
    - [X] 用户登录接口文档
    - [X] 用户注册接口文档
    - [X] 权限接口文档
    - [X] 用户组接口文档
- [X] 服务监控功能
    - [X] 创建监控服务数据接口(TCP)
        - [X] Kubernetes
        - [X] Kafka
        - [X] MySQL
        - [X] ElasticSearch
    - [X] 查询监控服务状态接口(TCP)
    - [X] 查询监控服务质量接口(TCP)
    - [ ] 创建AccessLog服务数据接口
    - [ ] 查询AccessLog服务数据接口
    - [X] 创建客户报告上传情况(upload)数据接口
    - [ ] 查询客户报告上传情况(upload)数据接口
    - [X] 创建中间表数据接口
    - [X] 查询中间表数据接口
- [X] 接入Prometheus告警功能(统一管理告警为后面工单做准备)
    - [X] 创建告警数据接口
    - [X] 查询告警数据接口
    - [x] 更新告警状态接口
    - [X] 查询告警等级数量接口
- [ ] Dashboard功能
    - [ ] SLA数据接口
    - [ ] Turn around time数据接口
    - [ ] Error code数据接口
    - [ ] kubernetes集群状态数据接口
    - [ ] kafka集群状态数据接口
    - [ ] elasticSearch集群状态数据接口
    - [ ] accessLog状态数据接口
- [X] 监控采集Client端
- [X] 系统日志模块
- [X] 统一返回码规范
- [X] 统一返回规范
- [X] 异步定期清理二维码图片
- [ ] 系统可配置参数
- [X] 鉴权后端与Client的认证功能
- [X] 分页器

